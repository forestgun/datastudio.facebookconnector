var metric1 = {"data":[{"name":"page_fans_gender_age","period":"day","values":[{"value":{"M.25-34":69,"F.65+":3,"F.55-64":5,"F.35-44":28,"U.35-44":1,"U.25-34":2,"F.45-54":9,"M.35-44":8,"M.18-24":17,"M.45-54":6,"F.18-24":47,"F.25-34":188},"end_time":"2020-03-02T08:00:00+0000"},{"value":{"M.25-34":69,"F.65+":3,"F.55-64":5,"F.35-44":28,"U.35-44":1,"U.25-34":2,"F.45-54":9,"M.35-44":8,"M.18-24":17,"M.45-54":6,"F.18-24":47,"F.25-34":188},"end_time":"2020-03-03T08:00:00+0000"}],"title":"Lifetime Likes by Gender and Age","description":"Lifetime: Aggregated demographic data about the people who like your Page based on the age and gender information they provide in their user profiles. (Unique Users)","id":"580780118698601\/insights\/page_fans_gender_age\/day"}],"paging":{"previous":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans_gender_age&since=1582876800&until=1583049600","next":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans_gender_age&since=1583222400&until=1583395200"}}

var metric2 = {"data":[{"name":"page_fans_country","period":"day","values":[{"value":{"DE":3,"NP":1,"BE":52,"PT":33,"JP":1,"DK":1,"LU":1,"FR":4,"SE":2,"DZ":1,"ID":1,"SN":1,"GB":3,"GE":1,"CA":1,"US":2,"IN":1,"MX":2,"GR":3,"IT":7,"CO":1,"ES":8,"AT":1,"PE":1,"AW":1,"CZ":2,"PK":1,"PL":12,"NL":235},"end_time":"2020-03-02T08:00:00+0000"},{"value":{"DE":3,"NP":1,"BE":52,"PT":33,"JP":1,"DK":1,"LU":1,"FR":4,"SE":2,"DZ":1,"SN":1,"GB":3,"CA":1,"GE":1,"US":2,"IN":1,"MX":2,"GR":3,"IT":7,"CO":1,"ES":8,"AT":1,"PE":1,"AW":1,"CZ":2,"PK":1,"PL":12,"NL":236},"end_time":"2020-03-03T08:00:00+0000"}],"title":"Lifetime Likes by Country","description":"Lifetime: Aggregated Facebook location data, sorted by country (top 50), about the people who like your Page. (Unique Users)","id":"580780118698601\/insights\/page_fans_country\/day"}],"paging":{"previous":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans_country&since=1582876800&until=1583049600","next":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans_country&since=1583222400&until=1583395200"}}

var metric3 = {"data":[{"name":"page_impressions","period":"day","values":[{"value":7,"end_time":"2020-03-02T08:00:00+0000"},{"value":7,"end_time":"2020-03-03T08:00:00+0000"}],"title":"Daily Total Impressions","description":"Daily: The number of times any content from your Page or about your Page entered a person's screen. This includes posts, stories, check-ins, ads, social information from people who interact with your Page and more. (Total Count)","id":"580780118698601\/insights\/page_impressions\/day"},{"name":"page_impressions","period":"week","values":[{"value":61,"end_time":"2020-03-02T08:00:00+0000"},{"value":63,"end_time":"2020-03-03T08:00:00+0000"}],"title":"Weekly Total Impressions","description":"Weekly: The number of times any content from your Page or about your Page entered a person's screen. This includes posts, stories, check-ins, ads, social information from people who interact with your Page and more. (Total Count)","id":"580780118698601\/insights\/page_impressions\/week"},{"name":"page_impressions","period":"days_28","values":[{"value":178,"end_time":"2020-03-02T08:00:00+0000"},{"value":182,"end_time":"2020-03-03T08:00:00+0000"}],"title":"28 Days Total Impressions","description":"28 Days: The number of times any content from your Page or about your Page entered a person's screen. This includes posts, stories, check-ins, ads, social information from people who interact with your Page and more. (Total Count)","id":"580780118698601\/insights\/page_impressions\/days_28"}],"paging":{"previous":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_impressions&since=1582876800&until=1583049600","next":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_impressions&since=1583222400&until=1583395200"}}

var metric4 = {"data":[{"name":"page_fans","period":"day","values":[{"value":383,"end_time":"2020-03-02T08:00:00+0000"},{"value":383,"end_time":"2020-03-03T08:00:00+0000"}],"title":"Lifetime Total Likes","description":"Lifetime: The total number of people who have liked your Page. (Unique Users)","id":"580780118698601\/insights\/page_fans\/day"}],"paging":{"previous":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans&since=1582876800&until=1583049600","next":"https:\/\/graph.facebook.com\/v6.0\/580780118698601\/insights?access_token=EAADcl8MFiJkBAEUBt4c8kwQr352H0PDWl8ZBJY6dU94nf7hic6xJnPpPoGtD0VZAj895qDGvJlE1I7dkqiKHXouHwUih5sqOa6ZCgkDeB664Xs2C1CEUQ2mKhNC5KaIsdQGzTRfcCdlFCcuQgon7B7ZBfcHDYTgMygkAJGqycF8ubgSDW3s0hcTObg1XcSDiyaMkO7GY9AZDZD&pretty=0&metric=page_fans&since=1583222400&until=1583395200"}}

dataList = [metric1,metric2,metric3,metric4];

//get the minimum days
var minDays = Math.min.apply(null,dataList.map(function(item) {
  return item['data'][0]['values'].length;

}));

console.log('Min day',minDays)


//Group by day
var days = [];

for (var day = 0; day < minDays; day++) {

  //Empty object
  var newDay = {};
  newDay.date = dataList[0]['data'][0]['values'][day]['end_time'];
  dataList.forEach((item, i) => {

    //For each metrics we add the value of the day in a field named by the name of the metric
    newDay[item['data'][0]['name']] = item['data'][0]['values'][day]['value']
  });
  days.push(newDay);
}

//We have now a list of day with sorted metrics
console.log('Days',days)
